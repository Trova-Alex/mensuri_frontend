@if (patient) {
  <div class="fixed inset-0 flex items-center justify-center bg-gray-800/80 bg-opacity-50 z-50">
    <div class="bg-white rounded-lg shadow-lg w-[500px] p-6 relative">

      <button (click)="close()"
              class="absolute top-2 right-2 text-gray-500 hover:text-black">
        ✖
      </button>

      <h2 class="text-xl font-bold mb-4 text-gray-800">
        Detalhes do Usuário
      </h2>
      <div class="flex justify-between items-center p-4 rounded-lg bg-gray-50">
        <p class="font-semibold"><strong>Nome:</strong> {{ patient.userProfile?.firstName }} {{ patient.userProfile?.lastName }}</p>
        <button (click)="onUnlinkUser()"
          class="flex items-center gap-1 text-sm text-red-600 hover:text-red-800 font-medium pr-4 cursor-pointer"
          title="Desvincular usuário da clínica">
          <span class="material-icons text-base">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.181 8.68a4.503 4.503 0 0 1 1.903 6.405m-9.768-2.782L3.56 14.06a4.5 4.5 0 0 0 6.364 6.365l3.129-3.129m5.614-5.615 1.757-1.757a4.5 4.5 0 0 0-6.364-6.365l-4.5 4.5c-.258.26-.479.541-.661.84m1.903 6.405a4.495 4.495 0 0 1-1.242-.88 4.483 4.483 0 0 1-1.062-1.683m6.587 2.345 5.907 5.907m-5.907-5.907L8.898 8.898M2.991 2.99 8.898 8.9" />
            </svg>
          </span>
          Desvincular
        </button>
      </div>
      <div class="grid grid-cols-2 gap-4 mt-8">
        @for (metric of metrics; track trackByMetric($index, metric)) {
          @let component = metricComponentsAvailable[metric];
          @if (component) {
            <ng-container *ngComponentOutlet="component; injector: dialogInjector ?? undefined"></ng-container>
          }
        }
      </div>
    </div>
  </div>
}
